# 使用钩子的工作流示例
# 运行: ./workflow-engine run examples/06-with-hooks.yaml

id: workflow-with-hooks
name: Workflow with Hooks
description: 使用前置和后置钩子的工作流示例

# 工作流级别的前置钩子
pre_hook:
  type: script
  config:
    script: |
      console.log('Workflow starting...');
      ctx.SetVariable('start_time', Date.now());

# 工作流级别的后置钩子
post_hook:
  type: script
  config:
    script: |
      const duration = Date.now() - ctx.GetVariable('start_time');
      console.log('Workflow completed in ' + duration + 'ms');

steps:
  - id: api_request
    name: API Request with Hooks
    type: http
    config:
      method: GET
      url: "https://httpbin.org/get"
    # 步骤级别的前置钩子
    pre_hook:
      type: script
      config:
        script: |
          console.log('Step starting...');
    # 步骤级别的后置钩子
    post_hook:
      type: script
      config:
        script: |
          console.log('Step completed');
    timeout: 30s
