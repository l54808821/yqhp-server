# 分布式执行 - 指定机器示例
# 运行: 通过 REST API 提交到 Master 节点
#
# 本示例展示如何在分布式模式下指定执行机器

id: distributed-target-slaves
name: 分布式执行 - 指定机器
description: 演示如何指定特定的 Slave 节点执行工作流

# ============================================
# 示例 1: 手动指定 Slave ID
# ============================================
# options:
#   vus: 100
#   duration: 5m
#   target_slaves:
#     mode: manual
#     slave_ids:
#       - slave-1
#       - slave-2
#       - slave-3

# ============================================
# 示例 2: 按标签选择 Slave
# ============================================
# options:
#   vus: 100
#   duration: 5m
#   target_slaves:
#     mode: label
#     labels:
#       region: cn-east      # 选择 cn-east 区域的节点
#       env: prod            # 且环境为 prod

# ============================================
# 示例 3: 按能力选择 Slave
# ============================================
# options:
#   vus: 100
#   duration: 5m
#   target_slaves:
#     mode: capability
#     capabilities:
#       - http_executor
#       - db_executor        # 需要数据库执行能力

# ============================================
# 示例 4: 自动选择（带约束）
# ============================================
options:
  vus: 200
  duration: 5m
  mode: constant-vus
  target_slaves:
    mode: auto
    min_slaves: 2 # 至少需要 2 个 Slave
    max_slaves: 5 # 最多使用 5 个 Slave

steps:
  - id: api_request
    name: API 请求测试
    type: http
    config:
      method: GET
      url: "https://httpbin.org/get"
    timeout: 30s
