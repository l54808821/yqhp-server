# 性能测试 - 每 VU 固定迭代次数模式
# 运行: ./workflow-engine run examples/12-performance-per-vu-iterations.yaml

id: performance-per-vu-iterations
name: Performance Test - Per VU Iterations
description: 每个虚拟用户执行固定迭代次数的性能测试示例

options:
  # 虚拟用户数
  vus: 10
  # 每个 VU 的迭代次数
  iterations: 20
  # 执行模式: 每个 VU 独立执行指定次数
  mode: per-vu-iterations
  # 性能阈值
  thresholds:
    - metric: http_req_duration
      condition: "p(95) < 500"
    - metric: http_req_failed
      condition: "rate < 0.01"

steps:
  - id: api_request
    name: API Request
    type: http
    config:
      method: GET
      url: "https://httpbin.org/get"
    timeout: 30s
