# HTTP 引擎对比示例
#
# 工作流引擎支持两种 HTTP 引擎：
# - fasthttp: 默认引擎，基于 FastHTTP 库，性能更高
# - standard: 标准库引擎，基于 Go net/http，兼容性更好
#
# 使用方法：
# 1. 使用 FastHTTP 引擎（默认）:
#    ./workflow-engine run examples/18-http-engine-comparison.yaml
#
# 2. 使用标准库引擎:
#    修改下方 http_engine 为 standard，然后执行相同命令
#
# 对比建议：
# - 分别使用两种引擎执行相同测试
# - 对比 RPS、平均延迟、P95/P99 延迟等指标

---
# FastHTTP 引擎测试（默认）
id: http-engine-fasthttp
name: FastHTTP 引擎性能测试

options:
  vus: 10
  duration: 30s
  http_engine: fasthttp # 默认值，可省略

steps:
  - id: request
    name: HTTP 请求
    type: http
    config:
      method: GET
      url: "https://httpbin.org/get"
      headers:
        User-Agent: "workflow-engine/fasthttp"

---
# 标准库引擎测试
# 将此文件复制一份，修改 http_engine 为 standard 进行对比
id: http-engine-standard
name: 标准库 HTTP 引擎性能测试

options:
  vus: 10
  duration: 30s
  http_engine: standard # 使用 Go 标准库 net/http

steps:
  - id: request
    name: HTTP 请求
    type: http
    config:
      method: GET
      url: "https://httpbin.org/get"
      headers:
        User-Agent: "workflow-engine/standard"
